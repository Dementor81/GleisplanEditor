<!DOCTYPE html>
<html lang="de">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta http-equiv="Cache-control" content="no-cache, no-store, must-revalidate" />
        <meta http-equiv="Pragma" content="no-cache" />
        <link rel="shortcut icon" type="image/ico" href="favicon.ico" />
        <title>Gleisplan</title>
        <link rel="stylesheet" href="start.css" />
        <!--     <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
        crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.6.3.min.js"></script>
    <script src="https://code.createjs.com/1.0.0/createjs.min.js"></script> -->

        <link rel="stylesheet" href="dev/bootstrap-5.2.2/bootstrap-icons.css" />
        <link href="dev/bootstrap-5.2.2/css/bootstrap.min.css" rel="stylesheet" />
        <script src="dev/bootstrap-5.2.2/js/bootstrap.bundle.min.js"></script>
        <script src="dev/jquery-3.6.1.js"></script>
        <script src="dev/createjs.js"></script>

        <script src="code/preLoader.js"></script>
        <script src="code/signaling.js"></script>

        <script src="tools.js"></script>
        <script src="code/track.js?02"></script>

        <style type="text/css"></style>
        <script>
            "use strict";

            $(() => {
                init();
            });

            function init() {}
        </script>
    </head>

    <body>
        <!DOCTYPE html>
        <html>
            <head>
                <title>Circular Curve Drawing</title>
            </head>
            <body>
                <canvas id="myCanvas" width="1000" height="1000"></canvas>
                <script>
                    function createBoxFromLine(startPoint, endPoint, size) {
                        // Calculate the direction vector of the line segment
                        const directionX = endPoint.x - startPoint.x;
                        const directionY = endPoint.y - startPoint.y;

                        // Calculate the length of the direction vector
                        const length = Math.sqrt(directionX * directionX + directionY * directionY);

                        // Normalize the direction vector
                        const normalizedDirectionX = directionX / length;
                        const normalizedDirectionY = directionY / length;

                        // Calculate the perpendicular vector (swapping x and y components and negating one of them)
                        const perpendicularX = -normalizedDirectionY * size;
                        const perpendicularY = normalizedDirectionX * size;
                        return {
                            bottomLeft: {
                                x: startPoint.x + perpendicularX,
                                y: startPoint.y + perpendicularY,
                            },
                            bottomRight: {
                                x: endPoint.x + perpendicularX,
                                y: endPoint.y + perpendicularY,
                            },
                            topRight: {
                                x: endPoint.x - perpendicularX,
                                y: endPoint.y - perpendicularY,
                            },
                            topLeft: {
                                x: startPoint.x - perpendicularX,
                                y: startPoint.y - perpendicularY,
                            },
                        };
                    }

                    function drawLine(ctx, p1, p2, color = "#000", size = 1) {
                        ctx.strokeStyle = color;
                        ctx.lineWidth = size;

                        // draw a red line
                        ctx.beginPath();
                        ctx.moveTo(p1.x, p1.y);
                        ctx.lineTo(p2.x, p2.y);
                        ctx.stroke();
                    }

                    function drawPoint(context, point, label, color, size) {
                        if (color == null) {
                            color = "#000";
                        }
                        if (size == null) {
                            size = 5;
                        }

                        const radius = 0.5 * size;

                        // to increase smoothing for numbers with decimal part
                        const pointX = Math.round(point.x - radius);
                        const pointY = Math.round(point.y - radius);

                        context.beginPath();
                        context.fillStyle = color;
                        context.fillRect(pointX, pointY, size, size);
                        context.fill();

                        if (label) {
                            var textX = Math.round(point.x);
                            var textY = Math.round(pointY - 5);

                            context.font = "Italic 14px Arial";
                            context.fillStyle = color;
                            context.textAlign = "center";
                            context.fillText(label, textX, textY);
                        }
                    }

                    // Get the canvas element and its context
                    var canvas = document.getElementById("myCanvas");
                    var context = canvas.getContext("2d");

                    // Define the two given points
                    const point1 = { x: 100, y: 300 };
                    const point2 = { x: 170, y: 335 };

                    drawPoint(context, point1, "p1", "#000", 3);
                    drawPoint(context, point2, "p2", "#000", 3);
                    drawLine(context, point1, point2);

                    const box = createBoxFromLine(point1, point2, 55);

                    drawPoint(context, box.topLeft, "topLeft", "#000", 3);
                    drawPoint(context, box.topRight, "topRight", "#000", 3);
                    drawPoint(context, box.bottomRight, "bottomRight", "#000", 3);
                    drawPoint(context, box.bottomLeft, "bottomLeft", "#000", 3);
                </script>
            </body>
        </html>
    </body>
</html>
